<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
<link rel="stylesheet" href="index.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<title>Ecostoveskenya</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<header>
    <nav class="navclass">
        <div class="navbar">
            <a  href="index.html"><button class="navbtn">Home</button></a>
            <a  href="Products.html"><button class="navbtn">Products</button></a>
            <a  href="contacts.html"><button class="navbtn">Contact Us</button></a>
            <a  href="about.html"><button class="navbtn">About Us</button></a>
        <a href="cart.html" id="viewcart"><button class="navbtn">Cart <i class="fa fa-shopping-basket"></i></i> <span id="cartcount">0</span></button></a>
    <div class="nav-slider"></div>    
    </div>
    </nav>
    <script>
        gsap.registerPlugin(ScrollTrigger);
       
ScrollTrigger.create({
    start:"top -10px",
    onEnter:()=> document.querySelectorAll(".navbtn").style.background="rgba(0,125,125,125)",
   // onLeaveBack:()=> document.querySelectorAll(".navbtn").style.background="blue"
});
gsap.from(".navbtn",{
    x:50,
    opacity:0,
    stagger:0.2,
    duration:0.5
});
const slider=document.querySelector(".nav-slider");
const btns=document.querySelectorAll(".navbtn");
const navbar=document.querySelector(".navbar");

function moveslider(target){
    const {left, width}=target.getBoundingClientRect();
    const navbarrect=navbar.getBoundingClientRect();
    gsap.to(slider,{
        x:left - navbarrect.left,
        width: linkrect.width,
        duration:0.3,
        ease:"power2.out"
    });
}
btns.forEach(btn => {
            btn.addEventListener("mouseenter", (e) => moveSlider(e.target));
        });
        btn.addEventListener("mouseleave", ()=>{
            gsap.to(slider,{width:0,duration:0.3});

        });


        // âœ… Reset slider when mouse leaves
       

  
    </script>
</header>
<body>
    <main>
    <div id="cartsection" class="cart-section" style="display: none;">
        <h2>myCart</h2>
        <section>
            <div class="gallery">
                <h3>Products</h3>
                 <ul  id="productlist"></ul></div>
         </div>
      
        </section>
        <ul id="cartitems"></ul>
        <p id="totals">Total:</p>
        <button id="checkout" style="display: none;" onclick="placeorder()">Place Order</button>
        <button onclick="window.location.href='index.html'" id="closecart">Close</button>
    </div>
    
    <div id="order-form" style="display: none;">
        <form >
        <h4>Enter Yours Details</h4>
        <input type="tel" id="user-phone" placeholder="Phone Number (e.g. 2547XXXXXXXX)" required/>
        <input type="text" id="address" placeholder="address line 1" required/>
        <input type="text" id="address2" placeholder="address line 2(optional)"/>
        <select name="city" id="city" required>
            <option value="">Select City/Town</option>
        </select>
        <div id="loadingmsg">Loading cities...</div>
        <div id="errormsg" style="display: none; color:red;">Failed to load cities!!</div>
       
        <input type="text" id="zip" placeholder="Zip Code" required/>
<input type="textarea" id="landmark" placeholder="Landmark (optional)"/>
<button type="submit">Confirm</button>
</form> 
</div>
</main>
<script>
    let cartItems=[];
    function checkcart(){
        const placeorderbtn=document.getElementById('checkout');
       // const cartitems=[];
        if(cartitems.length >0){
            placeorderbtn.style.display='block';
        }else{
            placeorderbtn.style.display='none';
        }
    }
    window.onload=checkcart;
    window.onload = () => {
            const loadingMessage = document.getElementById('loading-message');
            const errorMessage = document.getElementById('error-message');
            const citySelect = document.getElementById('city');

    fetch('http://api.geonames.org/searchJSON?=Kenya&maxRows=100&username=breidde3065')
    .then(response => response.json())
    .then(data=>{
        if (data.geonames){
        const cities=data.geonames;
       // const cityselect=document.getElementById('city');
        cities.forEach(city =>{
            const option=document.createElement('option');
            option.value=city.name;
            option.textContent=city.name;
            cityselect.appendChild(option);
        });
loadingMessage.style.display='none';
orderForm.style.display='block';
    }else{
        throw new Error("no cities found.");
    }
))
    .catch(error =>{
        console.error("Error fetchim=ng data:",error);
        loadingMessage.style.display='none';
        errorMessage.style.display = 'block';
    });
};
</script>
    <script src="product.js"></script>
</body>
</html>
